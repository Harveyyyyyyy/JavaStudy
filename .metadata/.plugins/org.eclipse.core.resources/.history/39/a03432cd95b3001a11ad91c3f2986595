package PersonJFrame;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import CompareArray.Comparator;
import CompareArray.CompareBirthdate;
import CompareArray.CompareName;
import CompareArray.EqualBirthdate;
import CompareArray.EqualName;
import CompareArray.Equalable;
import Person.Person;

public class PersonJFrame extends JFrame implements ActionListener,ListSelectionListener{
	protected JList<Person> jlist;
	protected DefaultListModel<Person> listmodel;
	protected PersonJPanel person;
	protected JComboBox<String>[] comboxs;
	private static Equalable[] equal= {new EqualName(),new EqualBirthdate()};
	private static Comparator[] comparators= {new CompareName(),new CompareBirthdate()};
	
	public PersonJFrame(Person[] pers) {
		this(pers,new PersonJPanel());
	}

	public PersonJFrame(Person[] pers, PersonJPanel person) {
		super("Person对象信息管理");
		this.setSize(700, 300);
		this.setLocationRelativeTo(null);
		this.setDefaultCloseOperation(EXIT_ON_CLOSE);
		
		JSplitPane split=new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
		this.getContentPane().add(split);
		this.person=person;
		split.add(this.person);
		split.setDividerLocation(110);
		split.setOneTouchExpandable(true);
		
		JPanel rightpanel=new JPanel(new BorderLayout());
		split.add(rightpanel);
		this.listmodel=new DefaultListModel<Person>();
		if(pers!=null)
			for(int j=0;j<pers.length;j++)
				this.listmodel.addElement(pers[j]);
		this.jlist=new JList<Person>(this.listmodel);
		this.jlist.addListSelectionListener(this);
		rightpanel.add(new JScrollPane(this.jlist));
		JPanel cmdpanel=new JPanel();
		rightpanel.add(cmdpanel,"South");
		
		String[][] str= {{"添加","删除","删除选中项"},{"查找关键字","排序关键字"},{"姓名","出生日期"}};
		for(int i=0;i<str[0].length;i++) {
			JButton button=new JButton(str[0][i]);
			button.addActionListener(this);
			cmdpanel.add(button);
		}
		this.comboxs=new JComboBox[str[1].length];
		for(int i=0;i<str[1].length;i++) {
			cmdpanel.add(new JLabel(str[1][i]));
			cmdpanel.add(this.comboxs[i]=new JComboBox<String>(str[2]));
			this.comboxs[i].addActionListener(this);
		}
		this.setVisible(true);
	}
	public PersonJFrame() {
		this(null,new PersonJPanel());
	}
	
	public void valueChanged(ListSelectionEvent ev) {
		this.person.set(this.jlist.getSelectedValue());
	}
	public void actionPerformed(ActionEvent ev) {
		if(ev.getSource() instanceof JButton) {
			Person per=null;
			switch(ev.getActionCommand()) {
			case "添加":
				if((per=this.person.get())!=null)
					this.listmodel.addElement(per);
			}
		}
	}
	public static void main(String[] args) {
		Person[] pers= {new Person(),new Person()};
		new PersonJFrame(pers,new PersonJPanel());
	}

}
